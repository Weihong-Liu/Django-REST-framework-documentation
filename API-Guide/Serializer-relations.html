

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>序列化器关系 (Serializer relations) &#8212; Django REST framework 中文文档</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'API-Guide/Serializer-relations';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="验证器 (Validators)" href="Validators.html" />
    <link rel="prev" title="序列化器字段 (Serializer fields)" href="Serializer-fields.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Django REST framework 中文文档
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorial</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Tutorial/Quickstart.html">快速开始</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tutorial/Serialization.html">教程 1：序列化</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tutorial/Requests-and-Responses.html">教程 2：请求和响应</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tutorial/Class-based-views.html">教程 3：基于类的视图</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tutorial/Authentication-and-Permissions.html">教程 4：认证和权限</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tutorial/Relationships-and-Hyperlinked-APIs.html">教程 5：关系和超链接 API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tutorial/ViewSets-and-Routers.html">教程 6：ViewSets ＆ Routers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tutorial/Schemas-and-client_libraries.html">教程 7：Schemas 和客户端库</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">API-Guide</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Requests.html">Requests</a></li>





<li class="toctree-l1"><a class="reference internal" href="Responses.html">响应 (Responses)</a></li>



<li class="toctree-l1"><a class="reference internal" href="Views.html">基于类的视图</a></li>

<li class="toctree-l1"><a class="reference internal" href="Generic-views.html">通用视图 (Generic views)</a></li>






<li class="toctree-l1"><a class="reference internal" href="Routers.html">Routers</a></li>



<li class="toctree-l1"><a class="reference internal" href="Parsers.html">解析器 (Parsers)</a></li>



<li class="toctree-l1"><a class="reference internal" href="Renderers.html">渲染器 (Renderers)</a></li>




<li class="toctree-l1"><a class="reference internal" href="Serializers.html">序列化器 (Serializers)</a></li>






<li class="toctree-l1"><a class="reference internal" href="Serializer-fields.html">序列化器字段 (Serializer fields)</a></li>










<li class="toctree-l1 current active"><a class="current reference internal" href="#">序列化器关系 (Serializer relations)</a></li>






<li class="toctree-l1"><a class="reference internal" href="Validators.html">验证器 (Validators)</a></li>




<li class="toctree-l1"><a class="reference internal" href="Authentication.html">认证 (Authentication)</a></li>



<li class="toctree-l1"><a class="reference internal" href="Permissions.html">权限 (Permissions)</a></li>



<li class="toctree-l1"><a class="reference internal" href="Throttling.html">限流 (Throttling)</a></li>


<li class="toctree-l1"><a class="reference internal" href="Filtering.html">过滤 (Filtering)</a></li>




<li class="toctree-l1"><a class="reference internal" href="Pagination.html">分页 (Pagination)</a></li>




<li class="toctree-l1"><a class="reference internal" href="Versioning.html">版本控制 (Versioning)</a></li>


<li class="toctree-l1"><a class="reference internal" href="Content-negotiation.html">内容协商 (Content negotiation)</a></li>

<li class="toctree-l1"><a class="reference internal" href="Metadata.html">元数据 (Metadata)</a></li>


<li class="toctree-l1"><a class="reference internal" href="Schemas.html">模式 (Schemas)</a></li>





<li class="toctree-l1"><a class="reference internal" href="Format-suffixes.html">格式后缀 (Format suffixes)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Returning-URLs.html">返回 URL (Returning URLs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Exceptions.html">异常 (Exceptions)</a></li>


<li class="toctree-l1"><a class="reference internal" href="Testing.html">测试 (Testing)</a></li>








<li class="toctree-l1"><a class="reference internal" href="Settings.html">设置 (Settings)</a></li>

</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Topics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Topics/Documenting_your_API.html">记录您的 API (Documenting your API)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Topics/API_Clients.html">API 客户端 (API Clients)</a></li>



<li class="toctree-l1"><a class="reference internal" href="../Topics/Internationalization.html">国际化 (Internationalization)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Topics/AJAX%2C_CSRF_%26_CORS.html">使用 AJAX，CSRF 和 CORS (Working with AJAX, CSRF &amp; CORS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Topics/HTML_%26_Forms.html">HTML 和表单 (HTML &amp; Forms)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Topics/The_Browsable_API.html">可浏览的 API (The Browsable API)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Topics/REST%2C_Hypermedia_%26_HATEOAS.html">REST, Hypermedia &amp; HATEOAS</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Community/Tutorials_and_Resources.html">教程和资源 (Tutorials and Resources)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Community/Third_Party_Packages.html">第三方包 (Third Party Packages)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Community/Contributing_to_REST_framework.html">对 REST framework 的贡献 (Contributing to REST framework)</a></li>



<li class="toctree-l1"><a class="reference internal" href="../Community/Project_management.html">项目管理 (Project management)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Community/Release_Notes.html">发行说明 (Release Notes)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Community/3.9_Announcement.html">Django REST framework 3.9</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Community/3.8_Announcement.html">Django REST framework 3.8</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Community/3.7_Announcement.html">Django REST framework 3.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Community/3.6_Announcement.html">Django REST framework 3.6</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Community/3.5_Announcement.html">Django REST framework 3.5</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Community/3.4_Announcement.html">Django REST framework 3.4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Community/3.3_Announcement.html">Django REST framework 3.3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Community/3.2_Announcement.html">Django REST framework 3.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Community/3.1_Announcement.html">Django REST framework 3.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Community/3.0_Announcement.html">Django REST framework 3.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Community/Kickstarter_Announcement.html">Kickstarting Django REST framework 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Community/Mozilla_Grant.html">Mozilla Grant</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Community/Funding.html">资金 (Funding)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Community/Jobs.html">工作 (Jobs)</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2FAPI-Guide/Serializer-relations.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/API-Guide/Serializer-relations.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>序列化器关系 (Serializer relations)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">序列化器关系 (Serializer relations)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#inspecting-relationships">检查关系 (Inspecting relationships)</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#api-api-reference">API 参考 (API Reference)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stringrelatedfield">StringRelatedField</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#primarykeyrelatedfield">PrimaryKeyRelatedField</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hyperlinkedrelatedfield">HyperlinkedRelatedField</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#slugrelatedfield">SlugRelatedField</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hyperlinkedidentityfield">HyperlinkedIdentityField</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#nested-relationships">嵌套关系 (Nested relationships)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">举个栗子</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#writable-nested-serializers">可写的嵌套序列化器 (Writable nested serializers)</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#custom-relational-fields">自定义关系字段 (Custom relational fields)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">举个栗子</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#custom-hyperlinked-fields">自定义超链接字段 (Custom hyperlinked fields)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">举个栗子</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#further-notes">进一步说明 (Further notes)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#queryset-the-queryset-argument"><code class="docutils literal notranslate"><span class="pre">queryset</span></code> 参数 (The <code class="docutils literal notranslate"><span class="pre">queryset</span></code> argument)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#html-customizing-the-html-display">自定义 HTML 显式 (Customizing the HTML display)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#select-field-cutoffs">Select field cutoffs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reverse-relations">反向关系 (Reverse relations)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#generic-relationships">通用关系 (Generic relationships)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#manytomanyfields-with-a-through-model">ManyToManyFields with a Through Model</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#third-party-packages">第三方包 (Third party packages)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#drf-nested-routers">DRF Nested Routers</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rest-framework-generic-relations">Rest Framework Generic Relations</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="serializer-relations">
<h1>序列化器关系 (Serializer relations)<a class="headerlink" href="#serializer-relations" title="Permalink to this heading">#</a></h1>
<p>糟糕的程序员担心代码。好的程序员担心数据结构和它们的关系。—— <a class="reference external" href="https://lwn.net/Articles/193245/">Linus Torvalds</a></p>
<p>关系字段用于表示模型关系。它们可以应用于 <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code>，<code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code> 和 <code class="docutils literal notranslate"><span class="pre">OneToOneField</span></code> 关系，以及反向关系和自定义关系 (例如：<code class="docutils literal notranslate"><span class="pre">GenericForeignKey</span></code>)。</p>
<hr class="docutils" />
<p><strong>注意</strong>：关系字段在 <code class="docutils literal notranslate"><span class="pre">relations.py</span></code> 中声明，但按照惯例，你应该从 <code class="docutils literal notranslate"><span class="pre">serializers</span></code> 模块导入它们，使用 <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">rest_framework</span> <span class="pre">import</span> <span class="pre">serializers</span></code> 并像 <code class="docutils literal notranslate"><span class="pre">serializers.&lt;FieldName&gt;</span></code> 这样引用字段。</p>
<hr class="docutils" />
<section id="inspecting-relationships">
<h2>检查关系 (Inspecting relationships)<a class="headerlink" href="#inspecting-relationships" title="Permalink to this heading">#</a></h2>
<p>当使用 <code class="docutils literal notranslate"><span class="pre">ModelSerializer</span></code> 类时，将为您自动生成序列化器字段和关系。检查这些自动生成的字段可以作为确定如何定制关系样式的有用工具。</p>
<p>为此，使用 <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">manage.py</span> <span class="pre">shell</span></code> 打开 Django shell，然后导入序列化器类，实例化它并打印对象表示…</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">myapp.serializers</span> <span class="kn">import</span> <span class="n">AccountSerializer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">serializer</span> <span class="o">=</span> <span class="n">AccountSerializer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="nb">repr</span><span class="p">(</span><span class="n">serializer</span><span class="p">)</span>  <span class="c1"># Or `print(repr(serializer))` in Python 3.x.</span>
<span class="go">AccountSerializer():</span>
<span class="go">    id = IntegerField(label=&#39;ID&#39;, read_only=True)</span>
<span class="go">    name = CharField(allow_blank=True, max_length=100, required=False)</span>
<span class="go">    owner = PrimaryKeyRelatedField(queryset=User.objects.all())</span>
</pre></div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="api-api-reference">
<h1>API 参考 (API Reference)<a class="headerlink" href="#api-api-reference" title="Permalink to this heading">#</a></h1>
<p>为了解释各种类型的关系字段，我们将为我们的示例使用一些简单的模型。我们的模型将用于音乐专辑，以及每个专辑中列出的歌曲。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Album</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">album_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">artist</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Track</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">album</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Album</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;tracks&#39;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">order</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">duration</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">unique_together</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;album&#39;</span><span class="p">,</span> <span class="s1">&#39;order&#39;</span><span class="p">)</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;order&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
</pre></div>
</div>
<section id="stringrelatedfield">
<h2>StringRelatedField<a class="headerlink" href="#stringrelatedfield" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">StringRelatedField</span></code> 可用它的 <code class="docutils literal notranslate"><span class="pre">__unicode__</span></code> 方法来表示关系的目标。</p>
<p>例如，以下序列化器。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AlbumSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="n">tracks</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">StringRelatedField</span><span class="p">(</span><span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Album</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;album_name&#39;</span><span class="p">,</span> <span class="s1">&#39;artist&#39;</span><span class="p">,</span> <span class="s1">&#39;tracks&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>将序列化为以下表示。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;album_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Things We Lost In The Fire&#39;</span><span class="p">,</span>
    <span class="s1">&#39;artist&#39;</span><span class="p">:</span> <span class="s1">&#39;Low&#39;</span><span class="p">,</span>
    <span class="s1">&#39;tracks&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;1: Sunflower&#39;</span><span class="p">,</span>
        <span class="s1">&#39;2: Whitetail&#39;</span><span class="p">,</span>
        <span class="s1">&#39;3: Dinosaur Act&#39;</span><span class="p">,</span>
        <span class="o">...</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>该字段是只读的。</p>
<p><strong>参数</strong>：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">many</span></code> - 如果是一对多的关系，就将此参数设置为 <code class="docutils literal notranslate"><span class="pre">True</span></code>。</p></li>
</ul>
</section>
<section id="primarykeyrelatedfield">
<h2>PrimaryKeyRelatedField<a class="headerlink" href="#primarykeyrelatedfield" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">PrimaryKeyRelatedField</span></code> 可用于使用其主键表示关系的目标。</p>
<p>例如，以下序列化器：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AlbumSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="n">tracks</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">PrimaryKeyRelatedField</span><span class="p">(</span><span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Album</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;album_name&#39;</span><span class="p">,</span> <span class="s1">&#39;artist&#39;</span><span class="p">,</span> <span class="s1">&#39;tracks&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>将序列化为这样的表示：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;album_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Undun&#39;</span><span class="p">,</span>
    <span class="s1">&#39;artist&#39;</span><span class="p">:</span> <span class="s1">&#39;The Roots&#39;</span><span class="p">,</span>
    <span class="s1">&#39;tracks&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="mi">89</span><span class="p">,</span>
        <span class="mi">90</span><span class="p">,</span>
        <span class="mi">91</span><span class="p">,</span>
        <span class="o">...</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>默认情况下，此字段是读写的，但您可以使用 <code class="docutils literal notranslate"><span class="pre">read_only</span></code> 标志更改此行为。</p>
<p><strong>参数</strong>：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">queryset</span></code> - 验证字段输入时用于模型实例查询的查询集。关系必须显式地设置查询集，或设置 <code class="docutils literal notranslate"><span class="pre">read_only=True</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">many</span></code> - 如果应用于一对多关系，则应将此参数设置为 <code class="docutils literal notranslate"><span class="pre">True</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">allow_null</span></code> - 如果设置为 <code class="docutils literal notranslate"><span class="pre">True</span></code>，那么该字段将接受 <code class="docutils literal notranslate"><span class="pre">None</span></code> 值或可为空的关系的空字符串。默认为 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pk_field</span></code> - 设置字段来控制主键值的序列化/反序列化。例如， <code class="docutils literal notranslate"><span class="pre">pk_field=UUIDField(format='hex')</span></code> 会将 UUID 主键序列化为其紧凑的十六进制表示形式。</p></li>
</ul>
</section>
<section id="hyperlinkedrelatedfield">
<h2>HyperlinkedRelatedField<a class="headerlink" href="#hyperlinkedrelatedfield" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">HyperlinkedRelatedField</span></code> 可用于使用超链接表示关系的目标。</p>
<p>例如，以下序列化器：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AlbumSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="n">tracks</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">HyperlinkedRelatedField</span><span class="p">(</span>
        <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">view_name</span><span class="o">=</span><span class="s1">&#39;track-detail&#39;</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Album</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;album_name&#39;</span><span class="p">,</span> <span class="s1">&#39;artist&#39;</span><span class="p">,</span> <span class="s1">&#39;tracks&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>将序列化为这样的表示：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;album_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Graceland&#39;</span><span class="p">,</span>
    <span class="s1">&#39;artist&#39;</span><span class="p">:</span> <span class="s1">&#39;Paul Simon&#39;</span><span class="p">,</span>
    <span class="s1">&#39;tracks&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;http://www.example.com/api/tracks/45/&#39;</span><span class="p">,</span>
        <span class="s1">&#39;http://www.example.com/api/tracks/46/&#39;</span><span class="p">,</span>
        <span class="s1">&#39;http://www.example.com/api/tracks/47/&#39;</span><span class="p">,</span>
        <span class="o">...</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>默认情况下，此字段是读写的，但您可以使用 <code class="docutils literal notranslate"><span class="pre">read_only</span></code> 标志更改此行为。</p>
<hr class="docutils" />
<p><strong>注意</strong>：该字段设计用于映射到接受单个 URL 关键字参数的 URL 的对象，使用 <code class="docutils literal notranslate"><span class="pre">lookup_field</span></code> 和 <code class="docutils literal notranslate"><span class="pre">lookup_url_kwarg</span></code> 参数设置。</p>
<p>这适用于包含单个主键或 slug 参数作为 URL 一部分的 URL。</p>
<p>如果您需要更复杂的超链接表示，则需要自定义该字段，如下面的<a class="reference external" href="http://www.django-rest-framework.org/api-guide/relations/#custom-hyperlinked-fields">自定义超链接字段</a>部分中所描述的。</p>
<hr class="docutils" />
<p><strong>参数</strong>：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">view_name</span></code> - 用作关系目标的视图名称。如果你使用的是<a class="reference external" href="http://www.django-rest-framework.org/api-guide/routers#defaultrouter">标准路由器类</a>，则这将是格式为 <code class="docutils literal notranslate"><span class="pre">&lt;modelname&gt;-detail</span></code> 的字符串。<strong>必填</strong>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">queryset</span></code> - 验证字段输入时用于模型实例查询的查询集。关系必须显式地设置查询集，或设置 <code class="docutils literal notranslate"><span class="pre">read_only=True</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">many</span></code> - 如果应用于一对多关系，则应将此参数设置为 <code class="docutils literal notranslate"><span class="pre">True</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">allow_null</span></code> - 如果设置为 <code class="docutils literal notranslate"><span class="pre">True</span></code>，那么该字段将接受 <code class="docutils literal notranslate"><span class="pre">None</span></code> 值或可为空的关系的空字符串。默认为 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lookup_field</span></code> - 用于查找的目标字段。对应于引用视图上的 URL 关键字参数。默认是 <code class="docutils literal notranslate"><span class="pre">'pk'</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lookup_url_kwarg</span></code> - 与查找字段对应的 URL conf 中定义的关键字参数的名称。默认使用与 <code class="docutils literal notranslate"><span class="pre">lookup_field</span></code> 相同的值。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format</span></code> - 如果使用格式后缀，则超链接字段将使用与目标相同的格式后缀，除非使用 <code class="docutils literal notranslate"><span class="pre">format</span></code> 参数重写。</p></li>
</ul>
</section>
<section id="slugrelatedfield">
<h2>SlugRelatedField<a class="headerlink" href="#slugrelatedfield" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">SlugRelatedField</span></code> 可用于使用目标上的字段来表示关系的目标。</p>
<p>例如，以下序列化器：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AlbumSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="n">tracks</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">SlugRelatedField</span><span class="p">(</span>
        <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">slug_field</span><span class="o">=</span><span class="s1">&#39;title&#39;</span>
     <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Album</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;album_name&#39;</span><span class="p">,</span> <span class="s1">&#39;artist&#39;</span><span class="p">,</span> <span class="s1">&#39;tracks&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>将序列化为这样的表示：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;album_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Dear John&#39;</span><span class="p">,</span>
    <span class="s1">&#39;artist&#39;</span><span class="p">:</span> <span class="s1">&#39;Loney Dear&#39;</span><span class="p">,</span>
    <span class="s1">&#39;tracks&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;Airport Surroundings&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Everything Turns to You&#39;</span><span class="p">,</span>
        <span class="s1">&#39;I Was Only Going Out&#39;</span><span class="p">,</span>
        <span class="o">...</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>默认情况下，此字段是读写的，但您可以使用 <code class="docutils literal notranslate"><span class="pre">read_only</span></code> 标志更改此行为。</p>
<p>当使用 <code class="docutils literal notranslate"><span class="pre">SlugRelatedField</span></code> 作为读写字段时，通常需要确保 slug 字段与 <code class="docutils literal notranslate"><span class="pre">unique=True</span></code> 的模型字段相对应。</p>
<p><strong>参数</strong>：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">slug_field</span></code> - 目标上应该用来表示它的字段。这应该是唯一标识任何给定实例的字段。例如，<code class="docutils literal notranslate"><span class="pre">username</span></code>。必填。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">queryset</span></code> - 验证字段输入时用于模型实例查询的查询集。关系必须显式地设置查询集，或设置 <code class="docutils literal notranslate"><span class="pre">read_only=True</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">many</span></code> - 如果应用于一对多关系，则应将此参数设置为 <code class="docutils literal notranslate"><span class="pre">True</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">allow_null</span></code> - 如果设置为 <code class="docutils literal notranslate"><span class="pre">True</span></code>，那么该字段将接受 <code class="docutils literal notranslate"><span class="pre">None</span></code> 值或可为空的关系的空字符串。默认为 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p></li>
</ul>
</section>
<section id="hyperlinkedidentityfield">
<h2>HyperlinkedIdentityField<a class="headerlink" href="#hyperlinkedidentityfield" title="Permalink to this heading">#</a></h2>
<p>此字段可以作为标识关系应用，例如 HyperlinkedModelSerializer 上的 <code class="docutils literal notranslate"><span class="pre">'url'</span></code> 字段。它也可以用于对象的属性。例如，以下序列化器：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AlbumSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">HyperlinkedModelSerializer</span><span class="p">):</span>
    <span class="n">track_listing</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">HyperlinkedIdentityField</span><span class="p">(</span><span class="n">view_name</span><span class="o">=</span><span class="s1">&#39;track-list&#39;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Album</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;album_name&#39;</span><span class="p">,</span> <span class="s1">&#39;artist&#39;</span><span class="p">,</span> <span class="s1">&#39;track_listing&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>将序列化为这样的表示：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;album_name&#39;</span><span class="p">:</span> <span class="s1">&#39;The Eraser&#39;</span><span class="p">,</span>
    <span class="s1">&#39;artist&#39;</span><span class="p">:</span> <span class="s1">&#39;Thom Yorke&#39;</span><span class="p">,</span>
    <span class="s1">&#39;track_listing&#39;</span><span class="p">:</span> <span class="s1">&#39;http://www.example.com/api/track_list/12/&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>该字段始终为只读。</p>
<p><strong>参数</strong>：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">view_name</span></code> - 用作关系目标的视图名称。如果你使用的是<a class="reference external" href="http://www.django-rest-framework.org/api-guide/routers#defaultrouter">标准路由器类</a>，则这将是格式为 <code class="docutils literal notranslate"><span class="pre">&lt;modelname&gt;-detail</span></code> 的字符串。<strong>必填</strong>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lookup_field</span></code> - 用于查找的目标字段。对应于引用视图上的 URL 关键字参数。默认是 <code class="docutils literal notranslate"><span class="pre">'pk'</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lookup_url_kwarg</span></code> - 与查找字段对应的 URL conf 中定义的关键字参数的名称。默认使用与 <code class="docutils literal notranslate"><span class="pre">lookup_field</span></code> 相同的值。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format</span></code> - 如果使用格式后缀，则超链接字段将使用与目标相同的格式后缀，除非使用 <code class="docutils literal notranslate"><span class="pre">format</span></code> 参数重写。</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section class="tex2jax_ignore mathjax_ignore" id="nested-relationships">
<h1>嵌套关系 (Nested relationships)<a class="headerlink" href="#nested-relationships" title="Permalink to this heading">#</a></h1>
<p>可以使用序列化器作为字段来表示嵌套关系。</p>
<p>如果该字段用于表示一对多关系，则应将 <code class="docutils literal notranslate"><span class="pre">many</span> <span class="pre">=</span> <span class="pre">True</span></code> 标志添加到序列化器字段。</p>
<section id="id1">
<h2>举个栗子<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h2>
<p>例如，以下序列化器：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TrackSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Track</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;order&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;duration&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">AlbumSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="n">tracks</span> <span class="o">=</span> <span class="n">TrackSerializer</span><span class="p">(</span><span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Album</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;album_name&#39;</span><span class="p">,</span> <span class="s1">&#39;artist&#39;</span><span class="p">,</span> <span class="s1">&#39;tracks&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>将序列化为嵌套表示，如下所示：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">album</span> <span class="o">=</span> <span class="n">Album</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">album_name</span><span class="o">=</span><span class="s2">&quot;The Grey Album&quot;</span><span class="p">,</span> <span class="n">artist</span><span class="o">=</span><span class="s1">&#39;Danger Mouse&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Track</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">album</span><span class="o">=</span><span class="n">album</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Public Service Announcement&#39;</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">245</span><span class="p">)</span>
<span class="go">&lt;Track: Track object&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Track</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">album</span><span class="o">=</span><span class="n">album</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;What More Can I Say&#39;</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">264</span><span class="p">)</span>
<span class="go">&lt;Track: Track object&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Track</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">album</span><span class="o">=</span><span class="n">album</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Encore&#39;</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">159</span><span class="p">)</span>
<span class="go">&lt;Track: Track object&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">serializer</span> <span class="o">=</span> <span class="n">AlbumSerializer</span><span class="p">(</span><span class="n">instance</span><span class="o">=</span><span class="n">album</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span>
<span class="go">{</span>
<span class="go">    &#39;album_name&#39;: &#39;The Grey Album&#39;,</span>
<span class="go">    &#39;artist&#39;: &#39;Danger Mouse&#39;,</span>
<span class="go">    &#39;tracks&#39;: [</span>
<span class="go">        {&#39;order&#39;: 1, &#39;title&#39;: &#39;Public Service Announcement&#39;, &#39;duration&#39;: 245},</span>
<span class="go">        {&#39;order&#39;: 2, &#39;title&#39;: &#39;What More Can I Say&#39;, &#39;duration&#39;: 264},</span>
<span class="go">        {&#39;order&#39;: 3, &#39;title&#39;: &#39;Encore&#39;, &#39;duration&#39;: 159},</span>
<span class="go">        ...</span>
<span class="go">    ],</span>
<span class="go">}</span>
</pre></div>
</div>
</section>
<section id="writable-nested-serializers">
<h2>可写的嵌套序列化器 (Writable nested serializers)<a class="headerlink" href="#writable-nested-serializers" title="Permalink to this heading">#</a></h2>
<p>默认情况下，嵌套序列化器是只读的。如果要支持对嵌套序列化器字段的写操作，则需要创建 <code class="docutils literal notranslate"><span class="pre">create()</span></code> 和/或 <code class="docutils literal notranslate"><span class="pre">update()</span></code> 方法，以便显式指定应如何保存子关系。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TrackSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Track</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;order&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;duration&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">AlbumSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="n">tracks</span> <span class="o">=</span> <span class="n">TrackSerializer</span><span class="p">(</span><span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Album</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;album_name&#39;</span><span class="p">,</span> <span class="s1">&#39;artist&#39;</span><span class="p">,</span> <span class="s1">&#39;tracks&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">validated_data</span><span class="p">):</span>
        <span class="n">tracks_data</span> <span class="o">=</span> <span class="n">validated_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;tracks&#39;</span><span class="p">)</span>
        <span class="n">album</span> <span class="o">=</span> <span class="n">Album</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="o">**</span><span class="n">validated_data</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">track_data</span> <span class="ow">in</span> <span class="n">tracks_data</span><span class="p">:</span>
            <span class="n">Track</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">album</span><span class="o">=</span><span class="n">album</span><span class="p">,</span> <span class="o">**</span><span class="n">track_data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">album</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;album_name&#39;</span><span class="p">:</span> <span class="s1">&#39;The Grey Album&#39;</span><span class="p">,</span>
    <span class="s1">&#39;artist&#39;</span><span class="p">:</span> <span class="s1">&#39;Danger Mouse&#39;</span><span class="p">,</span>
    <span class="s1">&#39;tracks&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s1">&#39;order&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Public Service Announcement&#39;</span><span class="p">,</span> <span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="mi">245</span><span class="p">},</span>
        <span class="p">{</span><span class="s1">&#39;order&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;What More Can I Say&#39;</span><span class="p">,</span> <span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="mi">264</span><span class="p">},</span>
        <span class="p">{</span><span class="s1">&#39;order&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Encore&#39;</span><span class="p">,</span> <span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="mi">159</span><span class="p">},</span>
    <span class="p">],</span>
<span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">serializer</span> <span class="o">=</span> <span class="n">AlbumSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">serializer</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="o">&lt;</span><span class="n">Album</span><span class="p">:</span> <span class="n">Album</span> <span class="nb">object</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section class="tex2jax_ignore mathjax_ignore" id="custom-relational-fields">
<h1>自定义关系字段 (Custom relational fields)<a class="headerlink" href="#custom-relational-fields" title="Permalink to this heading">#</a></h1>
<p>在极少数情况下，现有的关系样式都不适合您需要的表示，您可以实现一个完全自定义的关系字段，该字段准确地描述应该如何从模型实例生成输出表示。</p>
<p>要实现自定义关系字段，您应该重写 <code class="docutils literal notranslate"><span class="pre">RelatedField</span></code>，并实现 <code class="docutils literal notranslate"><span class="pre">.to_representation(self，value)</span></code> 方法。此方法将字段的目标作为 <code class="docutils literal notranslate"><span class="pre">value</span></code> 参数，并返回应用于序列化目标的表示。<code class="docutils literal notranslate"><span class="pre">value</span></code> 参数通常是模型实例。</p>
<p>如果想要实现读写关系字段，还必须实现 <code class="docutils literal notranslate"><span class="pre">.to_internal_value(self,</span> <span class="pre">data)</span></code> 方法。</p>
<p>要提供基于 <code class="docutils literal notranslate"><span class="pre">context</span></code> 的动态查询集，还可以重写 <code class="docutils literal notranslate"><span class="pre">.get_queryset(self)</span></code>，而不是在类上或初始化该字段时指定 <code class="docutils literal notranslate"><span class="pre">.queryset</span></code>。</p>
<section id="id2">
<h2>举个栗子<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h2>
<p>例如，我们可以定义一个关系字段，使用它的顺序，标题和持续时间将音轨序列化为自定义字符串表示。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="k">class</span> <span class="nc">TrackListingField</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">RelatedField</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">to_representation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%M:%S&#39;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">duration</span><span class="p">))</span>
        <span class="k">return</span> <span class="s1">&#39;Track </span><span class="si">%d</span><span class="s1">: </span><span class="si">%s</span><span class="s1"> (</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">order</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">AlbumSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="n">tracks</span> <span class="o">=</span> <span class="n">TrackListingField</span><span class="p">(</span><span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Album</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;album_name&#39;</span><span class="p">,</span> <span class="s1">&#39;artist&#39;</span><span class="p">,</span> <span class="s1">&#39;tracks&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>然后，此自定义字段将序列化为以下表示形式。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;album_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Sometimes I Wish We Were an Eagle&#39;</span><span class="p">,</span>
    <span class="s1">&#39;artist&#39;</span><span class="p">:</span> <span class="s1">&#39;Bill Callahan&#39;</span><span class="p">,</span>
    <span class="s1">&#39;tracks&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;Track 1: Jim Cain (04:39)&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Track 2: Eid Ma Clack Shaw (04:19)&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Track 3: The Wind and the Dove (04:34)&#39;</span><span class="p">,</span>
        <span class="o">...</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section class="tex2jax_ignore mathjax_ignore" id="custom-hyperlinked-fields">
<h1>自定义超链接字段 (Custom hyperlinked fields)<a class="headerlink" href="#custom-hyperlinked-fields" title="Permalink to this heading">#</a></h1>
<p>在某些情况下，您可能需要自定义超链接字段的行为，以表示需要多个查询字段的 URL。</p>
<p>您可以通过重写 <code class="docutils literal notranslate"><span class="pre">HyperlinkedRelatedField</span></code> 来实现。有两个方法重写：</p>
<p><strong>get_url(self, obj, view_name, request, format)</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">get_url</span></code> 方法用于将对象实例映射到其 URL 表示。</p>
<p>如果 <code class="docutils literal notranslate"><span class="pre">view_name</span></code> 和 <code class="docutils literal notranslate"><span class="pre">lookup_field</span></code> 属性未配置为正确匹配 URL conf，可能会引发 <code class="docutils literal notranslate"><span class="pre">NoReverseMatch</span></code>。</p>
<p><strong>get_object(self, queryset, view_name, view_args, view_kwargs)</strong></p>
<p>如果您想支持可写的超链接字段，那么您还需要重写 <code class="docutils literal notranslate"><span class="pre">get_object</span></code>，以便将传入的 URL 映射回它们表示的对象。对于只读的超链接字段，无需重写此方法。</p>
<p>此方法的返回值应该是与匹配的 URL conf 参数对应的对象。</p>
<p>可能会引发 <code class="docutils literal notranslate"><span class="pre">ObjectDoesNotExist</span></code> 异常。</p>
<section id="id3">
<h2>举个栗子<a class="headerlink" href="#id3" title="Permalink to this heading">#</a></h2>
<p>假设我们有一个 customer 对象的 URL，它接受两个关键字参数，如下所示：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">api</span><span class="o">/&lt;</span><span class="n">organization_slug</span><span class="o">&gt;/</span><span class="n">customers</span><span class="o">/&lt;</span><span class="n">customer_pk</span><span class="o">&gt;/</span>
</pre></div>
</div>
<p>这不能用仅接受单个查找字段的默认实现来表示。</p>
<p>在这种情况下，我们需要重写 <code class="docutils literal notranslate"><span class="pre">HyperlinkedRelatedField</span></code> 以获得我们想要的行为：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">serializers</span>
<span class="kn">from</span> <span class="nn">rest_framework.reverse</span> <span class="kn">import</span> <span class="n">reverse</span>

<span class="k">class</span> <span class="nc">CustomerHyperlink</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">HyperlinkedRelatedField</span><span class="p">):</span>
    <span class="c1"># 我们将它们定义为类属性，因此我们不需要将它们作为参数传递。</span>
    <span class="n">view_name</span> <span class="o">=</span> <span class="s1">&#39;customer-detail&#39;</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Customer</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">view_name</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="nb">format</span><span class="p">):</span>
        <span class="n">url_kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;organization_slug&#39;</span><span class="p">:</span> <span class="n">obj</span><span class="o">.</span><span class="n">organization</span><span class="o">.</span><span class="n">slug</span><span class="p">,</span>
            <span class="s1">&#39;customer_pk&#39;</span><span class="p">:</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="n">view_name</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">url_kwargs</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view_name</span><span class="p">,</span> <span class="n">view_args</span><span class="p">,</span> <span class="n">view_kwargs</span><span class="p">):</span>
        <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="p">{</span>
           <span class="s1">&#39;organization__slug&#39;</span><span class="p">:</span> <span class="n">view_kwargs</span><span class="p">[</span><span class="s1">&#39;organization_slug&#39;</span><span class="p">],</span>
           <span class="s1">&#39;pk&#39;</span><span class="p">:</span> <span class="n">view_kwargs</span><span class="p">[</span><span class="s1">&#39;customer_pk&#39;</span><span class="p">]</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">**</span><span class="n">lookup_kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>请注意，如果您想将此样式与通用视图一起使用，那么您还需要在视图上重写 <code class="docutils literal notranslate"><span class="pre">.get_object</span></code> 以获得正确的查找行为。</p>
<p>通常，我们建议在可能的情况下使用 API ​​表示的平面样式，但适度使用嵌套的 URL 样式也是合理的。</p>
</section>
</section>
<hr class="docutils" />
<section class="tex2jax_ignore mathjax_ignore" id="further-notes">
<h1>进一步说明 (Further notes)<a class="headerlink" href="#further-notes" title="Permalink to this heading">#</a></h1>
<section id="queryset-the-queryset-argument">
<h2><code class="docutils literal notranslate"><span class="pre">queryset</span></code> 参数 (The <code class="docutils literal notranslate"><span class="pre">queryset</span></code> argument)<a class="headerlink" href="#queryset-the-queryset-argument" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">queryset</span></code> 参数只社用于可写关系字段，在这种情况下，它用于执行从原始用户输入映射到模型实例的模型实例查找。</p>
<p>在 2.x 版本中，如果正在使用 <code class="docutils literal notranslate"><span class="pre">ModelSerializer</span></code> 类，则序列化器有时会自动确定 <code class="docutils literal notranslate"><span class="pre">queryset</span></code> 参数。</p>
<p>此行为现在替换为始终为可写关系字段使用显式 <code class="docutils literal notranslate"><span class="pre">queryset</span></code> 参数。</p>
<p>这样做可以减少 <code class="docutils literal notranslate"><span class="pre">ModelSerializer</span></code> 提供的隐藏 “魔术” 数量，使字段的行为更加清晰，并确保在使用 <code class="docutils literal notranslate"><span class="pre">ModelSerializer</span></code> 快捷方式或使用完全显式的 <code class="docutils literal notranslate"><span class="pre">Serializer</span></code> 类之间转换是微不足道的。</p>
</section>
<section id="html-customizing-the-html-display">
<h2>自定义 HTML 显式 (Customizing the HTML display)<a class="headerlink" href="#html-customizing-the-html-display" title="Permalink to this heading">#</a></h2>
<p>模型的内置 <code class="docutils literal notranslate"><span class="pre">__str__</span></code> 方法将用于生成用于填充 <code class="docutils literal notranslate"><span class="pre">choices</span></code> 属性的对象的字符串表示。这些 choices 用于填充在可浏览的 API 中选择的 HTML 输入。</p>
<p>要为此类输入提供自定义表示，请重写 <code class="docutils literal notranslate"><span class="pre">RelatedField</span></code> 子类的 <code class="docutils literal notranslate"><span class="pre">display_value()</span></code>。此方法将接收一个模型对象，并应返回一个适合表示它的字符串。例如：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TrackPrimaryKeyRelatedField</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">PrimaryKeyRelatedField</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">display_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;Track: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="select-field-cutoffs">
<h2>Select field cutoffs<a class="headerlink" href="#select-field-cutoffs" title="Permalink to this heading">#</a></h2>
<p>当在可浏览的 API 中渲染时，关系字段将默认只显示最多 1000 个可选择的项。如果存在更多项，则会显示 “More than 1000 items…” 的禁用选项。</p>
<p>此行为旨在防止模板由于显示大量关系而无法在可接受的时间段中渲染。</p>
<p>有两个关键字参数可用于控制此行为：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">html_cutoff</span></code> - 如果设置，这将是 HTML 选择下拉菜单中显示的选项的最大数量。设置为 <code class="docutils literal notranslate"><span class="pre">None</span></code> 可以禁用任何限制。默认为 <code class="docutils literal notranslate"><span class="pre">1000</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">html_cutoff_text</span></code> - 如果设置，如果在 HTML 选择下拉菜单中截断了最大数量的项，则将显示文本指示符。默认为 <code class="docutils literal notranslate"><span class="pre">&quot;More</span> <span class="pre">than</span> <span class="pre">{count}</span> <span class="pre">items…&quot;</span></code></p></li>
</ul>
<p>您还可以使用 settings 中的 <code class="docutils literal notranslate"><span class="pre">HTML_SELECT_CUTOFF</span></code> 和 <code class="docutils literal notranslate"><span class="pre">HTML_SELECT_CUTOFF_TEXT</span></code> 全局控制这些。</p>
<p>在强制执行截断的情况下，您可能希望使用 HTML 表单中的普通输入字段。您可以使用 <code class="docutils literal notranslate"><span class="pre">style</span></code> 关键字参数执行此操作。例如：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">assigned_to</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">SlugRelatedField</span><span class="p">(</span>
   <span class="n">queryset</span><span class="o">=</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">(),</span>
   <span class="n">slug_field</span><span class="o">=</span><span class="s1">&#39;username&#39;</span><span class="p">,</span>
   <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;base_template&#39;</span><span class="p">:</span> <span class="s1">&#39;input.html&#39;</span><span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="reverse-relations">
<h2>反向关系 (Reverse relations)<a class="headerlink" href="#reverse-relations" title="Permalink to this heading">#</a></h2>
<p>请注意，反向关系不会自动包含在 <code class="docutils literal notranslate"><span class="pre">ModelSerializer</span></code> 和 <code class="docutils literal notranslate"><span class="pre">HyperlinkedModelSerializer</span></code> 类中。要包含反向关系，您必须显式的将其添加到字段列表中。例如：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AlbumSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;tracks&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>您通常希望确保在关系上设置了适当的 <code class="docutils literal notranslate"><span class="pre">related_name</span></code> 参数，可以用作字段名称。例如：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Track</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">album</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Album</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;tracks&#39;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>如果您还没有为反向关系设置相关名称，则需要在 <code class="docutils literal notranslate"><span class="pre">fields</span></code> 参数中使用自动生成的相关名称。例如：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AlbumSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;track_set&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>有关更多详细信息，请参阅有关<a class="reference external" href="https://docs.djangoproject.com/en/stable/topics/db/queries/#following-relationships-backward">反向关系</a>的 Django 文档。</p>
</section>
<section id="generic-relationships">
<h2>通用关系 (Generic relationships)<a class="headerlink" href="#generic-relationships" title="Permalink to this heading">#</a></h2>
<p>如果要序列化通用外键，则需要定义一个自定义字段，以明确确定要如何序列化关系目标。</p>
<p>例如，给定标签的以下模型，它与其他任意模型的通用关系：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TaggedItem</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    使用通用关系的标签任意模型实例。</span>

<span class="sd">    See: https://docs.djangoproject.com/en/stable/ref/contrib/contenttypes/</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tag_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">()</span>
    <span class="n">content_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">ContentType</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">object_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">()</span>
    <span class="n">tagged_object</span> <span class="o">=</span> <span class="n">GenericForeignKey</span><span class="p">(</span><span class="s1">&#39;content_type&#39;</span><span class="p">,</span> <span class="s1">&#39;object_id&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tag_name</span>
</pre></div>
</div>
<p>以下两个模型，可能有相关的标签：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Bookmark</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A bookmark consists of a URL, and 0 or more descriptive tags.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">URLField</span><span class="p">()</span>
    <span class="n">tags</span> <span class="o">=</span> <span class="n">GenericRelation</span><span class="p">(</span><span class="n">TaggedItem</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Note</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A note consists of some text, and 0 or more descriptive tags.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
    <span class="n">tags</span> <span class="o">=</span> <span class="n">GenericRelation</span><span class="p">(</span><span class="n">TaggedItem</span><span class="p">)</span>
</pre></div>
</div>
<p>我们可以定义一个可用于序列化标签实例的自定义字段，使用每个实例的类型来确定它应该如何序列化。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TaggedObjectRelatedField</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">RelatedField</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A custom field to use for the `tagged_object` generic relationship.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">to_representation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize tagged objects to a simple textual representation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Bookmark</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;Bookmark: &#39;</span> <span class="o">+</span> <span class="n">value</span><span class="o">.</span><span class="n">url</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Note</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;Note: &#39;</span> <span class="o">+</span> <span class="n">value</span><span class="o">.</span><span class="n">text</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Unexpected type of tagged object&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>如果需要关系的目标具有嵌套表示，则可以使用 <code class="docutils literal notranslate"><span class="pre">.to_representation()</span></code> 方法中所需的序列化器：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">to_representation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize bookmark instances using a bookmark serializer,</span>
<span class="sd">        and note instances using a note serializer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Bookmark</span><span class="p">):</span>
            <span class="n">serializer</span> <span class="o">=</span> <span class="n">BookmarkSerializer</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Note</span><span class="p">):</span>
            <span class="n">serializer</span> <span class="o">=</span> <span class="n">NoteSerializer</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Unexpected type of tagged object&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span>
</pre></div>
</div>
<p>请注意，使用 <code class="docutils literal notranslate"><span class="pre">GenericRelation</span></code> 字段表示的反向通用键可以使用常规关系字段类型进行序列化，因为关系中目标的类型总是已知的。</p>
<p>有关更多信息，请参阅有关<a class="reference external" href="https://docs.djangoproject.com/en/stable/ref/contrib/contenttypes/#id1">通用关系的 Django 文档</a>。</p>
</section>
<section id="manytomanyfields-with-a-through-model">
<h2>ManyToManyFields with a Through Model<a class="headerlink" href="#manytomanyfields-with-a-through-model" title="Permalink to this heading">#</a></h2>
<p>默认情况下，以指定 <code class="docutils literal notranslate"><span class="pre">through</span></code> 模型为目标的 <code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code> 的关系字段设置为只读。</p>
<p>如果你显式指定指向带有 through 模型的 <code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code> 的关系字段，请确保将 <code class="docutils literal notranslate"><span class="pre">read_only</span></code> 设置为 <code class="docutils literal notranslate"><span class="pre">True</span></code>。</p>
</section>
</section>
<hr class="docutils" />
<section class="tex2jax_ignore mathjax_ignore" id="third-party-packages">
<h1>第三方包 (Third party packages)<a class="headerlink" href="#third-party-packages" title="Permalink to this heading">#</a></h1>
<p>以下是可用的第三方包。</p>
<section id="drf-nested-routers">
<h2>DRF Nested Routers<a class="headerlink" href="#drf-nested-routers" title="Permalink to this heading">#</a></h2>
<p><a class="reference external" href="https://github.com/alanjds/drf-nested-routers">drf-nested-routers</a> 包提供了用于处理嵌套资源的路由器和关系字段。</p>
</section>
<section id="rest-framework-generic-relations">
<h2>Rest Framework Generic Relations<a class="headerlink" href="#rest-framework-generic-relations" title="Permalink to this heading">#</a></h2>
<p><a class="reference external" href="https://github.com/Ian-Foote/rest-framework-generic-relations">rest-framework-generic-relations</a> 库为通用外键提供读/写序列化。</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./API-Guide"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="Serializer-fields.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">序列化器字段 (Serializer fields)</p>
      </div>
    </a>
    <a class="right-next"
       href="Validators.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">验证器 (Validators)</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">序列化器关系 (Serializer relations)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#inspecting-relationships">检查关系 (Inspecting relationships)</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#api-api-reference">API 参考 (API Reference)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stringrelatedfield">StringRelatedField</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#primarykeyrelatedfield">PrimaryKeyRelatedField</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hyperlinkedrelatedfield">HyperlinkedRelatedField</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#slugrelatedfield">SlugRelatedField</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hyperlinkedidentityfield">HyperlinkedIdentityField</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#nested-relationships">嵌套关系 (Nested relationships)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">举个栗子</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#writable-nested-serializers">可写的嵌套序列化器 (Writable nested serializers)</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#custom-relational-fields">自定义关系字段 (Custom relational fields)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">举个栗子</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#custom-hyperlinked-fields">自定义超链接字段 (Custom hyperlinked fields)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">举个栗子</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#further-notes">进一步说明 (Further notes)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#queryset-the-queryset-argument"><code class="docutils literal notranslate"><span class="pre">queryset</span></code> 参数 (The <code class="docutils literal notranslate"><span class="pre">queryset</span></code> argument)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#html-customizing-the-html-display">自定义 HTML 显式 (Customizing the HTML display)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#select-field-cutoffs">Select field cutoffs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reverse-relations">反向关系 (Reverse relations)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#generic-relationships">通用关系 (Generic relationships)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#manytomanyfields-with-a-through-model">ManyToManyFields with a Through Model</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#third-party-packages">第三方包 (Third party packages)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#drf-nested-routers">DRF Nested Routers</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rest-framework-generic-relations">Rest Framework Generic Relations</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>